function replacer(a,b){return util.isUndefined(b)?""+b:util.isNumber(b)&&!isFinite(b)?b.toString():util.isFunction(b)||util.isRegExp(b)?b.toString():b}function truncate(a,b){return util.isString(a)?a.length<b?a:a.slice(0,b):a}function getMessage(a){return truncate(JSON.stringify(a.actual,replacer),128)+" "+a.operator+" "+truncate(JSON.stringify(a.expected,replacer),128)}function fail(a,b,c,d,e){throw new assert.AssertionError({message:c,actual:a,expected:b,operator:d,stackStartFunction:e})}function ok(a,b){a||fail(a,!0,b,"==",assert.ok)}function _deepEqual(a,b){if(a===b)return!0;if(util.isBuffer(a)&&util.isBuffer(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0}return util.isDate(a)&&util.isDate(b)?a.getTime()===b.getTime():util.isRegExp(a)&&util.isRegExp(b)?a.source===b.source&&a.global===b.global&&a.multiline===b.multiline&&a.lastIndex===b.lastIndex&&a.ignoreCase===b.ignoreCase:util.isObject(a)||util.isObject(b)?objEquiv(a,b):a==b}function isArguments(a){return"[object Arguments]"==Object.prototype.toString.call(a)}function objEquiv(a,b){if(util.isNullOrUndefined(a)||util.isNullOrUndefined(b))return!1;if(a.prototype!==b.prototype)return!1;if(util.isPrimitive(a)||util.isPrimitive(b))return a===b;var c=isArguments(a),d=isArguments(b);if(c&&!d||!c&&d)return!1;if(c)return a=pSlice.call(a),b=pSlice.call(b),_deepEqual(a,b);var e,f,g=objectKeys(a),h=objectKeys(b);if(g.length!=h.length)return!1;for(g.sort(),h.sort(),f=g.length-1;f>=0;f--)if(g[f]!=h[f])return!1;for(f=g.length-1;f>=0;f--)if(e=g[f],!_deepEqual(a[e],b[e]))return!1;return!0}function expectedException(a,b){return a&&b?"[object RegExp]"==Object.prototype.toString.call(b)?b.test(a):a instanceof b?!0:b.call({},a)===!0?!0:!1:!1}function _throws(a,b,c,d){var e;util.isString(c)&&(d=c,c=null);try{b()}catch(f){e=f}if(d=(c&&c.name?" ("+c.name+").":".")+(d?" "+d:"."),a&&!e&&fail(e,c,"Missing expected exception"+d),!a&&expectedException(e,c)&&fail(e,c,"Got unwanted exception"+d),a&&e&&c&&!expectedException(e,c)||!a&&e)throw e}var util=require("util/"),pSlice=Array.prototype.slice,hasOwn=Object.prototype.hasOwnProperty,assert=module.exports=ok;assert.AssertionError=function(a){this.name="AssertionError",this.actual=a.actual,this.expected=a.expected,this.operator=a.operator,a.message?(this.message=a.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var b=a.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,b);else{var c=new Error;if(c.stack){var d=c.stack,e=b.name,f=d.indexOf("\n"+e);if(f>=0){var g=d.indexOf("\n",f+1);d=d.substring(g+1)}this.stack=d}}},util.inherits(assert.AssertionError,Error),assert.fail=fail,assert.ok=ok,assert.equal=function(a,b,c){a!=b&&fail(a,b,c,"==",assert.equal)},assert.notEqual=function(a,b,c){a==b&&fail(a,b,c,"!=",assert.notEqual)},assert.deepEqual=function(a,b,c){_deepEqual(a,b)||fail(a,b,c,"deepEqual",assert.deepEqual)},assert.notDeepEqual=function(a,b,c){_deepEqual(a,b)&&fail(a,b,c,"notDeepEqual",assert.notDeepEqual)},assert.strictEqual=function(a,b,c){a!==b&&fail(a,b,c,"===",assert.strictEqual)},assert.notStrictEqual=function(a,b,c){a===b&&fail(a,b,c,"!==",assert.notStrictEqual)},assert["throws"]=function(a,b,c){_throws.apply(this,[!0].concat(pSlice.call(arguments)))},assert.doesNotThrow=function(a,b){_throws.apply(this,[!1].concat(pSlice.call(arguments)))},assert.ifError=function(a){if(a)throw a};var objectKeys=Object.keys||function(a){var b=[];for(var c in a)hasOwn.call(a,c)&&b.push(c);return b};